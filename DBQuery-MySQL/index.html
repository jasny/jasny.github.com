<!DOCTYPE html>
<html>
  
<!-- Mirrored from jasny.github.com/DBQuery-MySQL/ by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 24 Feb 2013 05:59:53 GMT -->
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/main.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>DBQuery-MySQL by Jasny</title>
  </head>

  <body>
    <div id="wrapper">
      
      <div class="menu-main-container">
        <ul id="menu-main" class="menu">
          <li id="menu-item-794" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-794"><a href="http://www.jasny.net/">Home</a></li>
          <li id="menu-item-795" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-795"><a href="http://www.jasny.net/portfolio/">Portfolio</a></li>
          <li id="menu-item-796" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-796"><a href="http://jasny.github.com/">Open source projects</a></li>
          <li id="menu-item-797" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-797"><a href="http://www.jasny.net/articles">Blog</a></li>
        </ul>
      </div>  

      <div id="header">
        <h1><a href="http://www.jasny.net/">Jasny <small>· web development</small></a></h1>
        <p class="description">Helping you out with PHP, MySQL &amp; Javascript</p>
      </div><!-- close:header --> <div id="content">
      
      <div id="main-content">
        <div class="post">

        <section id="downloads" class="clearfix">
          <a href="https://github.com/jasny/DBQuery-MySQL/zipball/master" id="download-zip" class="button" onclick="pageTracker._trackEvent('Downloads', 'Download', 'Download zip');"><span>Download .zip</span></a>
          <a href="https://github.com/jasny/DBQuery-MySQL/tarball/master" id="download-tar-gz" class="button" onclick="pageTracker._trackEvent('Downloads', 'Download', 'Download%20tar.html');"><span>Download .tar.gz</span></a>
          <a href="https://github.com/jasny/DBQuery-MySQL" id="view-on-github" class="button" onclick="pageTracker._trackEvent('Downloads', 'View on GitHub', 'View on GitHub');"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section class="entry">
          <h1>MySQL Query builder for PHP</h1>

<p><a href="http://travis-ci.org/jasny/DBQuery-MySQL"><img src="https://secure.travis-ci.org/jasny/DBQuery-MySQL.png?branch=master" alt="Build Status"></a></p>

<p>This library is designed to be the ultimate tool for building, splitting and modifying SQL queries.</p>

<p>Automatic smart quoting helps against SQL injection and problems with reserved keywords.</p>

<p>DBQuery can be used standalone, in conjunction with <a href="../DB-MySQL/index.html">Jasny's DB class</a> or in almost any
framework.</p>

<h2>Installation</h2>

<p>DBQuery can be easily installed using <a href="http://getcomposer.org/">composer</a>. Alternatively you can simply download the
.zip and copy the file from the 'src' folder.</p>

<h2>Examples</h2>

<p>An example to simple to be using a query builder</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $query = DBQuery::select()-&gt;columns('id, name')-&gt;from('foo')-&gt;where('active = 1');
    $result = $mysqli-&gt;query($query); // SELECT `id`, `name` FROM `foo` WHERE `active` = 1
</code></pre>

<p>Dynamicly apply paging and filtering on a query</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $query = new DBQuery("SELECT * FROM foo LEFT JOIN bar ON foo.bar_id = bar.id WHERE active = 1 LIMIT 25");
    if (isset($_GET['page'])) $query-&gt;page(3);

    $filter = isset($_POST['filter']) ? $_POST['filter'] : array(); // array('type' =&gt; 'bike', 'price between ? and ?' =&gt; array(10, 20))
    foreach ($filter as $field =&gt; $value) {
        $query-&gt;where($field, $value);
    }

    $result = $mysqli-&gt;query($query); // SELECT * FROM foo LEFT JOIN bar ON foo.bar_id = bar.id WHERE (active = 1) AND (`type` = "bike") AND (`price` between 10 and 20) LIMIT 25 OFFSET 50
</code></pre>

<p>Map fields for an INSERT INTO ... SELECT ... ON DUPLICATE KEY query</p>

<pre><code>&lt;?php
    use Jasny\MySQL\DBQuery;

    $columns = array(
        'ref' =&gt; 'ref',
        'man' =&gt; 'boy',
        'woman' =&gt; 'girl',
        'amount' =&gt; 'SUM(z.bucks)'
    );

    $select = DBQuery::select()-&gt;columns($columns)-&gt;from('foo')-&gt;innerJoin('z', 'foo.id = z.foo_id')-&gt;groupBy('foo.id');
    $insert = DBQuery::insert()-&gt;into('abc')-&gt;columns(array_keys($columns))-&gt;set($select)-&gt;onDuplicateKeyUpdate();

    $mysql-&gt;query($insert); // INSERT INTO `abc` (`ref`, `man`, `woman`, `amount`)
                            //  SELECT `ref` AS `ref`, `boy` AS `man`, `girl` AS `woman`, SUM(`z`.`bucks`) AS `amount` FROM `foo` LEFT JOIN `z` ON `foo`.`id` = `z`.`foo_id` GROUP BY `foo`.id`
                            //  ON DUPLICATE KEY UPDATE `ref` = VALUES(`ref`), `man` = VALUES(`man`), `woman` = VALUES(`woman`), `amount` = VALUES(`amount`)
</code></pre>

<h2>API documentation (generated)</h2>

<p><a href="docs/index.html">http://jasny.github.com/DBQuery-MySQL/docs</a></p>
        </section>

<div class="shr-publisher-876"></div><!-- Start Shareaholic LikeButtonSetBottom Automatic --><!-- End Shareaholic LikeButtonSetBottom Automatic -->
          <div class="wp-about-author-containter-top" style="background-color:#fff;"><div class="wp-about-author-pic"><img alt='' src='http://0.gravatar.com/avatar/0bba82e8b2a9d2cf9645cb07ea54766f?s=100&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D100&amp;r=G' class='avatar avatar-100 photo' height='100' width='100' /></div><div class="wp-about-author-text"><h3><a href='http://www.jasny.net/articles/author/admin/' title='Arnold Daniels'>Arnold Daniels</a></h3><p>I've spend a big part of my life behind a computer, learning about databases (MySQL), programming (PHP) and system administration (Linux). Currently I playing with HTML5, jquery and node.js.</p><p class="wpa-social wpa-nomargin"><a class='wpa-social-icons' href='mailto:arnold@jasny.net' title='Send me an e-mail'><img src='images/mail.png' alt='E-mail'/></a><a class='wpa-social-icons' href='http://www.twitter.com/ArnoldDaniels' title='Follow me on Twitter'><img src='images/twitter.png' alt='Twitter'/></a><a class='wpa-social-icons' href='http://www.linkedin.com/in/arnolddaniels' title='Connect with me on LinkedIn'><img src='images/linkedin.png' alt='LinkedIn'/></a><a class='wpa-social-icons' href='http://www.github.com/jasny' title='Follow me on Github'><img src='images/github.png' alt='Github'/></a><a class='wpa-social-icons' href='http://www.gittip.com/ArnoldDaniels' title='Buy me a beer on Gittip'><img src='images/gittip.png' alt='Gittip'/></a></p></div></div>                  </div>
        </div>
        <!-- You can start editing here. -->
      <div id="comments">
        <h3>No comments yet.</h3>
      </div><!-- close:comments -->
      <div id="commentform">
        <h3>Write a comment:</h3>
          <form action="http://www.jasny.net/wp-comments-post.php" method="post" name="comment-form">
              <p>
            <input type="text" name="author" id="author" class="input-text" value="" size="22" />
            <label for="author">Name (needed)</label>
          </p>
          <p>
            <input type="text" name="email" id="email" class="input-text" value="" size="22" />
            <label for="email">Email (needed but it will not be published)</label>
          </p>
          <p>
            <input type="text" name="url" id="url" class="input-text" value="" size="22" />
            <label for="url">Website (if you have one)</label>
          </p>
              <p>
            <textarea name="comment" id="comment" cols="100%" rows="10"></textarea>
          </p>
          <p class="input-submit">
            <input name="submit-comment" type="submit" id="submit-comment" value="comment" />
            <input type="hidden" name="comment_post_ID" value="876" />
          </p>
        <p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="af0f96916b" /></p> 

        </form>
      </div><!-- close:commentform -->
                </div>
        <div id="sidebar" class="clearfix">
      <div id="sb-1">
              </div><!-- close:sb-1 -->
      <div id="sb-2">
              </div>
      </div>  </div>
      <div id="footer">
        <a href="#" class="alignright">Back to top &UpArrow;</a>
        <p><a href="http://www.jasny.net/">Jasny · web development</a> proudly powered by <a href="http://www.wordpress.org/" >Wordpress</a> and <a href="http://jarederickson.com/2011/min-a-free-wordpress-minimal-theme/">min Theme</a></p>
      </div><!-- close:footer -->
    </div><!-- close:wrapper -->

<script type='text/javascript' src='javascripts/jquery.js'></script>

    <script type='text/javascript' src='javascripts/jquery.shareaholic.js'></script>

    <script type="text/javascript">var SHRSB_Settings = {"shr-publisher-876":{"link":"http:\/\/www.jasny.net\/articles\/jasny-bootstrap-file-upload-with-existing-file\/","shortener":"bitly","title":"Jasny Bootstrap - File upload with existing file","notes":"I%27m%20happy%20to%20say%20that%20many%20developers%20have%20found%20their%20way%20to%20Jasny%20Bootstrap.%20Especially%20the%20file%20upload%20component%2C%20is%20very%20popular.%20It%20can%20replace%20any%20normal%20%26lt%3Binput%20type%3D%22file%22%26gt%3B%20element%20to%20display%20a%20nice%20widget%20that%20is%20consistent%20across%20browsers%20and%20can%20show%20a%20preview%20for%20images.%0D%0A%0D%0A%0D%0AThis%20i","service":"7,5,102,38,2,3,40,88,201","apikey":"8afa39428933be41f8afdb8ea21a495c","expand":"false","src":"http:\/\/www.jasny.net\/wp-content\/uploads\/shareaholic\/spritegen","localize":true,"share_src":"http:\/\/www.shareaholic.com","rel":"nofollow","target":"_blank","bgimg":"http:\/\/www.jasny.net\/wp-content\/plugins\/sexybookmarks\/images\/sharing-shr.png","bgimg_padding":"28px 0 0 10px","twitter_template":"%24%7Btitle%7D+-+%24%7Bshort_link%7D+%28via+%40ArnoldDaniels%29","mode":"inject","designer_toolTips":"1","tip_bg_color":"#000000","tip_text_color":"#ffffff"}};</script>
    <script type="text/javascript">SHRSB_Settings['shr-publisher-876'].link = "http://jasny.github.com/DBQuery-MySQL/";SHRSB_Settings['shr-publisher-876'].title = "DBQuery-MySQL by Jasny";</script>      
        

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-32388850-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>
  </body>

<!-- Mirrored from jasny.github.com/DBQuery-MySQL/ by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 24 Feb 2013 05:59:57 GMT -->
</html>
